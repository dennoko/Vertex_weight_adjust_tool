# Vertex Weight Adjust Tool

Unity Editor拡張として動作する、スキニング済みメッシュの頂点ウェイト調整ツールです。
VRChatアバターやゲーム用キャラクターのウェイト微調整、特定頂点の修正作業を効率化するために設計されています。

## 特徴
- **頂点単位のウェイト編集**: シーンビュー上で直感的に頂点を選択し、スライダーや数値入力でウェイトを調整可能。
- **視覚的なスライダー (Partition Slider)**: ウェイトの比率をバーで表示し、ハンドルをドラッグして直感的に配分を変更できます。
- **スマートロック機能**: 任意のボーンのウェイトをロック可能。スライダー操作時には、ロックされていない近隣ボーン間で自動的にウェイトを再配分します。
- **便利な修正ツール**:
    - **Mirror**: X軸対称の頂点にウェイトを転送。
    - **Prune**: 0.01以下の微小なウェイトを一括削除。
    - **Copy/Paste**: 頂点間でのウェイトコピー。
    - **Heatmap**: 特定ボーンの影響範囲を色で可視化。
- **安全設計**: Undo/Redoに完全対応。明示的なメッシュ指定により誤操作を防止。

## インストール
このフォルダ（`Vertex_weight_adjust_tool`）をUnityプロジェクトの `Assets/Editor/` 以下の任意の場所に配置してください。

## 使い方

1.  **ウィンドウを開く**
    - Unityメニューバーから `Tools > Vertex Weight Adjust Tool` を選択します。

2.  **対象メッシュの指定**
    - ヒエラルキーにある編集したいキャラクター等のGameObject（`SkinnedMeshRenderer`を持つもの）を、ツールの「Target Mesh」欄にドラッグ＆ドロップします。
    - 自動的に「Edit Mode」がONになります。

3.  **頂点の選択**
    - シーンビュー上で、キャラクターの頂点（設定により色変更可）をクリックします。
    - 「Show All Vertices」をONにすると、全頂点がドットで表示されます。
    - 「Vertex Color」「Selected Color」でドットの色を見やすく変更できます。

4.  **ウェイトの編集**
    - **スライダー**: 色分けされたバーの境界線（ハンドル）をドラッグしてウェイト比率を変更します。
    - **数値入力**: リスト表示から直接数値を入力します。
    - **ロック**: チェックボックスをONにすると、そのボーンのウェイトが固定され、スライダー操作等の影響を受けなくなります。

5.  **便利機能**
    - **Prune**: `Prune < 0.01` ボタンを押すと、選択頂点に含まれる微小なゴミウェイトを削除します。
    - **Mirror**: `Mirror Weights` ボタンを押すと、X軸対称位置にある頂点に対称ボーンのウェイトを適用します。
    - **Heatmap**: 「Show Heatmap」をONにし、対象ボーンを選ぶと、影響度が視覚化されます。

## ファイル構成
- `Scripts/`
    - `VertexWeightEditorWindow.cs`: メインのウィンドウロジック
    - `WeightPartitionSlider.cs`: スライダー描画ロジック
    - `Data/BoneWeightInfo.cs`: データ構造クラス
- `README.md`: このドキュメント
